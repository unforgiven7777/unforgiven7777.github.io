<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="description" content="美しいスライドショー形式のフォトビューワー。画像を選択して自動再生。">
    <title>フォトビューワー - スライドショー</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- ===== 起動画面（画像選択） ===== -->
    <div id="landing-screen" class="screen active">
        <div class="landing-content">
            <div class="logo-area">
                <div class="logo-icon">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <rect x="4" y="8" width="40" height="32" rx="4" stroke="url(#grad1)" stroke-width="2.5"
                            fill="none" />
                        <circle cx="18" cy="22" r="4" stroke="url(#grad1)" stroke-width="2" />
                        <path
                            d="M4 32 L16 24 L24 30 L34 20 L44 28 L44 36 C44 38.2 42.2 40 40 40 L8 40 C5.8 40 4 38.2 4 36 Z"
                            fill="url(#grad2)" opacity="0.3" />
                        <defs>
                            <linearGradient id="grad1" x1="0" y1="0" x2="48" y2="48">
                                <stop offset="0%" stop-color="#a78bfa" />
                                <stop offset="100%" stop-color="#60a5fa" />
                            </linearGradient>
                            <linearGradient id="grad2" x1="0" y1="20" x2="48" y2="40">
                                <stop offset="0%" stop-color="#a78bfa" />
                                <stop offset="100%" stop-color="#60a5fa" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <h1>フォトビューワー</h1>
                <p class="subtitle">フォルダーを選択してスライドショーを開始</p>
            </div>

            <div id="drop-zone" class="drop-zone">
                <div class="drop-zone-inner">
                    <svg class="drop-icon" width="64" height="64" viewBox="0 0 64 64" fill="none">
                        <path d="M32 8 L32 40" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" />
                        <path d="M22 30 L32 40 L42 30" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M8 44 L8 48 C8 52.4 11.6 56 16 56 L48 56 C52.4 56 56 52.4 56 48 L56 44"
                            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" />
                    </svg>
                    <p class="drop-text desktop-only">ここにフォルダーをドラッグ＆ドロップ</p>
                    <p class="drop-text mobile-only">タップして画像を選択</p>
                    <p class="drop-subtext desktop-only">または</p>
                    <button id="btn-select-files" class="btn btn-primary desktop-only">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path
                                d="M3 7 L3 15 C3 16.1 3.9 17 5 17 L15 17 C16.1 17 17 16.1 17 15 L17 9 C17 7.9 16.1 7 15 7 L11 7 L9 5 L5 5 C3.9 5 3 5.9 3 7Z"
                                stroke="currentColor" stroke-width="1.5" fill="none" />
                        </svg>
                        フォルダーを選択
                    </button>
                    <button id="btn-select-images-mobile" class="btn btn-primary mobile-only">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="5" width="14" height="10" rx="2" stroke="currentColor" stroke-width="1.5"
                                fill="none" />
                            <circle cx="7" cy="9" r="1.5" stroke="currentColor" stroke-width="1" />
                            <path d="M3 13 L7 10 L10 12 L14 8 L17 11" stroke="currentColor" stroke-width="1.2"
                                fill="none" />
                        </svg>
                        画像を選択
                    </button>
                    <!-- PC用: フォルダー選択 -->
                    <input type="file" id="file-input" webkitdirectory directory multiple hidden>
                    <!-- モバイル用: 画像ファイル選択 -->
                    <input type="file" id="file-input-mobile" accept="image/*" multiple hidden>
                </div>
            </div>

            <!-- 選択済み画像のプレビュー -->
            <div id="preview-section" class="preview-section hidden">
                <div class="preview-header">
                    <h2 id="selected-count">0枚の画像を選択</h2>
                    <div class="preview-actions">
                        <button id="btn-clear" class="btn btn-ghost">
                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                <path d="M4 4 L14 14 M14 4 L4 14" stroke="currentColor" stroke-width="1.5"
                                    stroke-linecap="round" />
                            </svg>
                            クリア
                        </button>
                        <button id="btn-add-more" class="btn btn-ghost desktop-only">
                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                <path d="M9 3 L9 15 M3 9 L15 9" stroke="currentColor" stroke-width="1.5"
                                    stroke-linecap="round" />
                            </svg>
                            フォルダー追加
                        </button>
                        <button id="btn-add-more-mobile" class="btn btn-ghost mobile-only">
                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                <path d="M9 3 L9 15 M3 9 L15 9" stroke="currentColor" stroke-width="1.5"
                                    stroke-linecap="round" />
                            </svg>
                            画像追加
                        </button>
                        <input type="file" id="file-input-add" webkitdirectory directory multiple hidden>
                        <input type="file" id="file-input-add-mobile" accept="image/*" multiple hidden>
                    </div>
                </div>
                <div id="preview-grid" class="preview-grid"></div>
                <div class="start-area">
                    <div class="interval-setting">
                        <label for="interval-input">切り替え間隔</label>
                        <div class="interval-control">
                            <button id="btn-interval-down" class="btn-interval" aria-label="間隔を減らす">−</button>
                            <span id="interval-display">5</span>
                            <span class="interval-unit">秒</span>
                            <button id="btn-interval-up" class="btn-interval" aria-label="間隔を増やす">＋</button>
                        </div>
                        <input type="range" id="interval-input" min="1" max="30" value="5" class="interval-slider">
                    </div>
                    <button id="btn-start" class="btn btn-start">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M8 5 L19 12 L8 19 Z" fill="currentColor" />
                        </svg>
                        スライドショーを開始
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== スライドショー画面 ===== -->
    <div id="slideshow-screen" class="screen">
        <div id="slideshow-container" class="slideshow-container">
            <img id="slide-current" class="slide-img active" src="" alt="スライド画像">
            <img id="slide-next" class="slide-img" src="" alt="スライド画像">
            <!-- スワイプヒント（モバイル初回表示用） -->
            <div id="swipe-hint" class="swipe-hint mobile-only">
                <div class="swipe-hint-inner">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                        <path d="M8 24 L18 18 M8 24 L18 30" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" opacity="0.5" />
                        <path d="M40 24 L30 18 M40 24 L30 30" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" opacity="0.5" />
                        <circle cx="24" cy="24" r="6" stroke="currentColor" stroke-width="2" fill="none" />
                        <path d="M24 20 L24 28 M20 24 L28 24" stroke="currentColor" stroke-width="1.5"
                            stroke-linecap="round" opacity="0.6" />
                    </svg>
                    <p>左右スワイプで画像を切り替え</p>
                </div>
            </div>
        </div>

        <!-- オーバーレイコントロール -->
        <div id="slideshow-overlay" class="slideshow-overlay">
            <!-- 上部バー -->
            <div class="overlay-top">
                <button id="btn-back" class="btn-icon" title="戻る">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M15 19 L8 12 L15 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
                <div class="slide-info">
                    <span id="slide-counter">1 / 1</span>
                </div>
                <button id="btn-fullscreen" class="btn-icon" title="全画面">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M4 9 L4 4 L9 4 M15 4 L20 4 L20 9 M20 15 L20 20 L15 20 M9 20 L4 20 L4 15"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </button>
            </div>

            <!-- 中央ナビ -->
            <div class="overlay-center">
                <button id="btn-prev" class="btn-nav" title="前の画像">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <path d="M20 6 L10 16 L20 26" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
                <button id="btn-next" class="btn-nav" title="次の画像">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <path d="M12 6 L22 16 L12 26" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </button>
            </div>

            <!-- 下部バー -->
            <div class="overlay-bottom">
                <div class="progress-bar-container">
                    <div id="progress-bar" class="progress-bar"></div>
                </div>
                <div class="bottom-controls">
                    <button id="btn-play-pause" class="btn-icon btn-play" title="再生/一時停止">
                        <svg id="icon-play" width="28" height="28" viewBox="0 0 28 28" fill="none">
                            <path d="M9 5 L22 14 L9 23 Z" fill="currentColor" />
                        </svg>
                        <svg id="icon-pause" width="28" height="28" viewBox="0 0 28 28" fill="none" class="hidden">
                            <rect x="7" y="5" width="4" height="18" rx="1" fill="currentColor" />
                            <rect x="17" y="5" width="4" height="18" rx="1" fill="currentColor" />
                        </svg>
                    </button>
                    <div class="bottom-info">
                        <span id="filename-display" class="filename">ファイル名</span>
                    </div>
                    <div class="speed-control">
                        <span id="speed-display" class="speed-label">5秒</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>